<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ìƒˆ ì•±í‚¤ í…ŒìŠ¤íŠ¸</title>
</head>
<body>
    <h1>ìƒˆ ì¹´ì¹´ì˜¤ ì•±í‚¤ í…ŒìŠ¤íŠ¸</h1>
    <p>ìƒˆë¡œ ë°œê¸‰ë°›ì€ JavaScript í‚¤ë¥¼ ì•„ë˜ì— ì…ë ¥í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:</p>
    
    <input type="text" id="appkey" placeholder="ìƒˆ JavaScript í‚¤ ì…ë ¥" style="width:400px;padding:10px;margin:10px 0;">
    <button onclick="testNewKey()" style="padding:10px 20px;">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
    
    <div id="status" style="margin:20px 0;font-size:18px;"></div>
    <div id="map" style="width:500px;height:400px;margin:20px 0;background:#f0f0f0;display:none;"></div>

    <script>
        function testNewKey() {
            const appkey = document.getElementById('appkey').value.trim();
            const statusDiv = document.getElementById('status');
            
            if (!appkey) {
                statusDiv.innerHTML = 'âŒ ì•±í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!';
                statusDiv.style.color = 'red';
                return;
            }
            
            statusDiv.innerHTML = 'ğŸ”„ ìƒˆ ì•±í‚¤ë¡œ í…ŒìŠ¤íŠ¸ ì¤‘...';
            statusDiv.style.color = 'blue';
            
            // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì œê±°
            const oldScript = document.querySelector('script[src*="dapi.kakao.com"]');
            if (oldScript) {
                oldScript.remove();
            }
            
            // ìƒˆ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
            const script = document.createElement('script');
            script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appkey}&libraries=services`;
            
            script.onload = function() {
                statusDiv.innerHTML = 'âœ… ì„±ê³µ! ìƒˆ ì•±í‚¤ê°€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!';
                statusDiv.style.color = 'green';
                
                // ì§€ë„ ìƒì„± í…ŒìŠ¤íŠ¸
                setTimeout(() => {
                    try {
                        const container = document.getElementById('map');
                        container.style.display = 'block';
                        const options = {
                            center: new kakao.maps.LatLng(37.5665, 126.978),
                            level: 3
                        };
                        const map = new kakao.maps.Map(container, options);
                        statusDiv.innerHTML += '<br/>ğŸ—ºï¸ ì§€ë„ë„ ì •ìƒ í‘œì‹œë©ë‹ˆë‹¤!';
                    } catch (error) {
                        statusDiv.innerHTML += '<br/>âš ï¸ ì§€ë„ ìƒì„± ì˜¤ë¥˜: ' + error.message;
                    }
                }, 1000);
            };
            
            script.onerror = function() {
                statusDiv.innerHTML = 'âŒ ì—¬ì „íˆ 403 ì—ëŸ¬ì…ë‹ˆë‹¤. ë„ë©”ì¸ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.';
                statusDiv.style.color = 'red';
            };
            
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
